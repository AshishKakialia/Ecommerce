{% extends 'main/base.html' %}

{% block content %}
<select data-placeholder="Select Options" id="categories" multiple>
    <option class="select_option" value="selectall">Select All</option>
    {% for category in categories %}
    <option class="categories" value="{{category}}">{{category}}</option>
    {% endfor %}
</select>
<select id="products"></select>
<script id="products" multiple>
    $(document).ready(function () {
        $('#categories').select2();
    });

    $('#categories').change(function () {
        $.ajax({
            type: 'POST',
            url: '/random/',
            data: { categories: $('#categories').val() },
            success: function (product_titles) {
                if (product_titles == 0) {
                    $('#products').empty();
                }
                else {
                    $('#products').empty();
                    for (let i = 0; i < product_titles.length; i++) {
                        $('#products').append('<option>' + product_titles[i] + '</option>');
                    }
                }
            }
        })
    });
</script>
{% endblock %}